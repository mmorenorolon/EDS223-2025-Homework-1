---
title: "Homework 1: Map Making Practice"
author: "Melannie Moreno Rol√≥n"
date: "2025-10-06"
format: 
  pdf:
    code-fold: false
    toc: true
    number-sections: true
    fig-width: 7
    fig-height: 5
editor: source
editor_options: 
  chunk_output_type: console
---

# Title: `r params$title`
Name: `r params$author`
Date: `r params$date`

# Introduction: Exploring Environmental (In)justice

This analysis explores environmental justice in the Caguas Municipality of Puerto Rico. Per US EPA's EJ Screen Tool, I visualized disparities in demographic vulnerability to

# Data

```{r}
#| label: load-packages
# Load relevant packages
library(sf)
library(here)
library(tidyverse)
library(tmap)
```

```{r}
#| label: load-database
# Read in the geodatabase
gdb_path <- here("data", "ejscreen",
                 "EJSCREEN_2023_BG_StatePct_with_AS_CNMI_GU_VI.gdb")
```

```{r}
#| label: visualize-layers
#See the layer name of the geodatabase
# st_layers(gdb_path)
```

```{r}
#|label: read-layer
#Read in the geodatabase from the identified layer name
ejscreen <- st_read(gdb_path, 
                    layer = "EJSCREEN_StatePctiles_with_AS_CNMI_GU_VI")
```

```{r}
#testing that the code worked
st_crs(caguas)
st_geometry_type(caguas)
```

# Methods:

## Create a Subset Data
```{r}
#subset data into the Caguas Municipality in Puerto Rico

#filter to Puerto Rico
puerto_rico <- ejscreen %>%
  dplyr::filter(ST_ABBREV == "PR")

#filter to Municipality: Caguas
caguas <- puerto_rico %>%
  dplyr::filter(CNTY_NAME == "Caguas Municipio")
```

##Explore Data
```{r}
names(caguas)[1:15]
summary(caguas)
```

# Map 1: Distribution of RMP Facilities in Caguas, PR

```{r}
tmap_mode("plot")

tm_shape(caguas) +
  tm_polygons("PRMP",
              title = "Risk Management Plan (km)",
              palette = "YlOrRd",
              style = "quantile") +
  tm_layout(main.title = "Distribution of RMP Facilities in Caguas, PR",
            legend.outside = TRUE,
            frame = FALSE)

```

# Map 2: Percentage of Low Income Communites in Caguas, PR

```{r}
tm_shape(caguas) +
  tm_polygons("LOWINCOME",
              title = "Percent of Low Income Population (%)",
              palette = "Blues",
              style = "quantile") +
  tm_layout(main.title = "Percentage of Low Income Communites in Caguas, PR",
            legend.outside = TRUE,
            frame = FALSE)

```

# Citation

B_LOWINCPCT